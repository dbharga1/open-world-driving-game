<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dream Drive</title>
<style>
body{margin:0;overflow:hidden;background:#000;font-family:Arial}
canvas{display:block}
button{
  position:fixed;border:none;border-radius:14px;
  background:#ffffffdd;font-size:14px;
}
#left{bottom:20px;left:20px;width:80px;height:80px}
#right{bottom:20px;left:120px;width:80px;height:80px}
#gas{bottom:20px;right:20px;width:90px;height:90px}
#glitter{bottom:130px;right:20px;width:90px;height:60px}
#music{top:20px;left:20px;width:120px;height:45px}
#next{top:75px;left:20px;width:120px;height:45px}
#lantern{top:130px;left:20px;width:120px;height:45px}
</style>
</head>


<body>
<canvas id="game"></canvas>


<button id="left">LEFT</button>
<button id="right">RIGHT</button>
<button id="gas">GAS</button>
<button id="glitter">✨</button>
<button id="music">RADIO</button>
<button id="next">NEXT</button>
<button id="lantern">LANTERN</button>


<audio id="audio"></audio>


<script>
/* ========= SETUP ========= */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();addEventListener("resize",resize);


const world={w:5200,h:5200};


/* ========= PLAYER ========= */
const car={x:2600,y:2600,a:-Math.PI/2,s:0};


/* ========= INPUT ========= */
let gas=false,left=false,right=false;
function hold(id,on,off){
  const b=document.getElementById(id);
  b.onpointerdown=e=>{e.preventDefault();on()};
  b.onpointerup=off;
  b.onpointerleave=off;
}
hold("gas",()=>gas=true,()=>gas=false);
hold("left",()=>left=true,()=>left=false);
hold("right",()=>right=true,()=>right=false);


/* ========= TOGGLES ========= */
let glitterOn=false,night=false;
glitter.onclick=()=>glitterOn=!glitterOn;
lantern.onclick=()=>night=!night;


/* ========= MUSIC ========= */
const audio=document.getElementById("audio");
const songs=[
 "music/song1.mp3","music/song2.mp3",
 "music/song3.mp3","music/song4.mp3",
 "music/song5.mp3","music/song6.mp3"
];
let songIndex=0;
music.onclick=()=>audio.paused?(audio.src=songs[songIndex],audio.play()):audio.pause();
next.onclick=()=>{songIndex=(songIndex+1)%songs.length;audio.src=songs[songIndex];audio.play();};


/* ========= ROADS ========= */
const roads=[];
for(let i=0;i<7;i++){
  roads.push({x:0,y:700*i,w:5200,h:160});
  roads.push({x:700*i,y:0,w:160,h:5200});
}


/* ========= WORLD OBJECTS ========= */
const trees=[...Array(700)].map(()=>({x:Math.random()*world.w,y:Math.random()*world.h}));
const buildings=[...Array(120)].map(()=>({
  x:Math.random()*world.w,y:Math.random()*world.h,
  w:120+Math.random()*180,
  h:120+Math.random()*180,
  c:`hsl(${Math.random()*360},20%,60%)`
}));


/* ========= LANDMARKS ========= */
const castle={x:1100,y:1100};
const princess={x:3800,y:1300};
const lake={x:1200,y:3800};
const market={x:3600,y:3600};
const tower={x:2600,y:800};


/* ========= PARTICLES ========= */
const glitterP=[];
const lanterns=[...Array(160)].map(()=>({
  x:Math.random()*world.w,
  y:Math.random()*world.h,
  phase:Math.random()*Math.PI*2,
  speed:0.0006 + Math.random()*0.0006
}));




/* ========= DRAW ========= */
function drawTree(x,y){
  ctx.fillStyle="#2f6b3f";
  ctx.beginPath();
  ctx.moveTo(x,y-24);
  ctx.lineTo(x-18,y+16);
  ctx.lineTo(x+18,y+16);
  ctx.fill();
  ctx.fillStyle="#5a3a29";
  ctx.fillRect(x-3,y+16,6,10);
}


function drawCar(x,y,a){
  ctx.save();ctx.translate(x,y);ctx.rotate(a);
  ctx.fillStyle="rgba(0,0,0,0.35)";
  ctx.fillRect(-26,-10,52,20);
  ctx.fillStyle="hotpink";
  ctx.beginPath();ctx.roundRect(-24,-14,48,28,12);ctx.fill();
  ctx.fillStyle="#ffd6eb";ctx.fillRect(-12,-10,24,20);
  ctx.fillStyle="#111";
  ctx.fillRect(-22,-16,8,6);ctx.fillRect(14,-16,8,6);
  ctx.fillRect(-22,10,8,6);ctx.fillRect(14,10,8,6);
  ctx.fillStyle="#fff";ctx.fillRect(10,-6,26,12);
  ctx.fillStyle="#000";ctx.font="bold 10px Arial";
  ctx.textAlign="center";ctx.fillText("NISHU",23,4);
  ctx.restore();
}


function banner(text){
  ctx.fillStyle="rgba(0,0,0,0.7)";
  ctx.fillRect(canvas.width/2-260,70,520,70);
  ctx.fillStyle="#fff";
  ctx.font="bold 32px Arial";
  ctx.textAlign="center";
  ctx.fillText(text,canvas.width/2,118);
}


function drawMinimap(){
  const s=150,sc=s/world.w;
  const x=canvas.width-s-20,y=20;
  ctx.fillStyle="rgba(0,0,0,0.6)";
  ctx.fillRect(x,y,s,s);
  ctx.fillStyle="yellow";ctx.fillText("C",x+castle.x*sc,y+castle.y*sc);
  ctx.fillStyle="pink";ctx.fillText("P",x+princess.x*sc,y+princess.y*sc);
  ctx.fillStyle="cyan";ctx.fillText("L",x+lake.x*sc,y+lake.y*sc);
  ctx.fillStyle="orange";ctx.fillText("M",x+market.x*sc,y+market.y*sc);
  ctx.fillStyle="white";ctx.fillText("Y",x+car.x*sc,y+car.y*sc);
}


/* ========= LOOP ========= */
function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);


  if(gas)car.s+=0.28;
  car.s*=0.94;
  if(left)car.a-=0.05;
  if(right)car.a+=0.05;
  car.x+=Math.cos(car.a)*car.s;
  car.y+=Math.sin(car.a)*car.s;


  const cx=car.x-canvas.width/2;
  const cy=car.y-canvas.height/2;


  ctx.fillStyle=night?"#010104":"#4aa36a";
  ctx.fillRect(0,0,canvas.width,canvas.height);


  /* ROADS */
  roads.forEach(r=>{
    ctx.fillStyle="#2a2a2a";
    ctx.fillRect(r.x-cx,r.y-cy,r.w,r.h);
    ctx.strokeStyle="#ffffff55";
    ctx.setLineDash([20,20]);
    ctx.beginPath();
    ctx.moveTo(r.x-cx,r.y-cy+r.h/2);
    ctx.lineTo(r.x-cx+r.w,r.y-cy+r.h/2);
    ctx.stroke();
    ctx.setLineDash([]);
  });


  buildings.forEach(b=>{
    ctx.fillStyle=b.c;
    ctx.fillRect(b.x-cx,b.y-cy,b.w,b.h);
  });


  trees.forEach(t=>drawTree(t.x-cx,t.y-cy));


  /* LANDMARKS */
  ctx.fillStyle="#999";
  ctx.fillRect(castle.x-cx,castle.y-cy,380,260);


  ctx.fillStyle="#ff69b4";
  ctx.fillRect(princess.x-cx,princess.y-cy,440,260);


  ctx.fillStyle="#4fc3f7";
  ctx.beginPath();
  ctx.arc(lake.x-cx,lake.y-cy,180,0,Math.PI*2);
  ctx.fill();


  ctx.fillStyle="#b5651d";
  ctx.fillRect(market.x-cx,market.y-cy,300,200);


  ctx.fillStyle="#777";
  ctx.fillRect(tower.x-cx,tower.y-cy,120,420);


  /* BANNERS */
  if(Math.hypot(car.x-castle.x,car.y-castle.y)<350) banner("🏰 CASTLE");
  if(Math.hypot(car.x-princess.x,car.y-princess.y)<350) banner("💖 PRINCESS DREAM HOUSE");
  if(Math.hypot(car.x-lake.x,car.y-lake.y)<300) banner("🌊 LAKE");
  if(Math.hypot(car.x-market.x,car.y-market.y)<300) banner("🛍️ MARKET");


  /* LANTERNS */
 if(night){
  lanterns.forEach(l=>{
    l.phase += l.speed;


    const ly = l.y + Math.sin(l.phase) * 10;
    const lx = l.x + Math.cos(l.phase * 0.6) * 6;


    // strong glow
    const gx = lx - cx;
    const gy = ly - cy;


    ctx.beginPath();
    ctx.fillStyle = "rgba(255,180,80,0.35)";
    ctx.arc(gx, gy, 45, 0, Math.PI*2);
    ctx.fill();


    // inner glow
    ctx.beginPath();
    ctx.fillStyle = "rgba(255,200,120,0.6)";
    ctx.arc(gx, gy, 22, 0, Math.PI*2);
    ctx.fill();


    // core lantern
    ctx.beginPath();
    ctx.fillStyle = "rgba(255,240,200,1)";
    ctx.arc(gx, gy, 6, 0, Math.PI*2);
    ctx.fill();
  });
}






  /* GLITTER */
  if(glitterOn){
    glitterP.push({x:car.x,y:car.y,life:40,c:`hsl(${Math.random()*360},100%,70%)`});
  }
  glitterP.forEach(p=>{
    p.life--;ctx.fillStyle=p.c;
    ctx.fillRect(p.x-cx,p.y-cy,4,4);
  });
  while(glitterP.length && glitterP[0].life<=0)glitterP.shift();


  drawCar(car.x-cx,car.y-cy,car.a);
  drawMinimap();


  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>